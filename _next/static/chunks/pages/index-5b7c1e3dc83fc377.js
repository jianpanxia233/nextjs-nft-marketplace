(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{78581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(10661)}])},10661:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var a=n(85893),s=n(83078),r=n(34051),i=n.n(r),o=n(67294),p=n(4672),u=n(67225),d=n(25675),l=n.n(d),c=n(45220),f=n(61744);function y(e){var t=e.nftAddress,n=e.tokenId,r=e.isVisible,i=e.marketplaceAddress,u=e.onClose,d=(0,c.lm)(),l=(0,o.useState)(0),y=l[0],m=l[1],b=(0,s.JX)({abi:p,contractAddress:i,functionName:"updateListing",params:{nftAddress:t,tokenId:n,newPrice:f.fi(y||"0")}}).runContractFunction;return(0,a.jsx)(c.u_,{isVisible:r,onCancel:u,onCloseButtonPressed:u,onOk:function(){b({onError:function(e){console.log(e)},onSuccess:function(){return d({type:"success",message:"listing updated",title:"Listing updated - please refresh (and move blocks)",position:"topR"}),u&&u(),void m("0")}})},children:(0,a.jsx)(c.II,{label:"Update listing price in ETH",name:"New listing price",type:"number",onChange:function(e){m(e.target.value)}})})}function m(e,t,n,a,s,r,i){try{var o=e[r](i),p=o.value}catch(u){return void n(u)}o.done?t(p):Promise.resolve(p).then(a,s)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(a,s){var r=e.apply(t,n);function i(e){m(r,a,s,i,o,"next",e)}function o(e){m(r,a,s,i,o,"throw",e)}i(void 0)}))}}function v(e){var t=e.price,n=e.nftAddress,r=e.tokenId,d=e.marketplaceAddress,m=e.seller,v=(0,s.Nr)(),x=v.isWeb3Enabled,k=v.account,h=(0,o.useState)(""),I=h[0],N=h[1],g=(0,o.useState)(""),w=g[0],A=g[1],M=(0,o.useState)(""),_=M[0],j=M[1],F=(0,o.useState)(!1),C=F[0],E=F[1],O=(0,c.lm)(),P=(0,s.JX)({abi:u,contractAddress:n,functionName:"tokenURI",params:{tokenId:r}}).runContractFunction,T=(0,s.JX)({abi:p,contractAddress:d,functionName:"buyItem",msgValue:t,params:{nftAddress:n,tokenId:r}}).runContractFunction;function L(){return(L=b(i().mark((function e(){var t,n,a,s,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:if(t=e.sent,console.log("The TokenURI is ".concat(t)),!t){e.next=16;break}return n=t.replace("ipfs://","https://ipfs.io/ipfs/"),e.next=8,fetch(n);case 8:return e.next=10,e.sent.json();case 10:a=e.sent,s=a.image,r=s.replace("ipfs://","https://ipfs.io/ipfs/"),N(r),A(a.name),j(a.description);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,o.useEffect)((function(){x&&function(){L.apply(this,arguments)}()}),[x]);var S=m===k||void 0===m,B=S?"you":function(e,t){if(e.length<=t)return e;var n=t-"...".length,a=Math.ceil(n/2),s=Math.floor(n/2);return e.substring(0,a)+"..."+e.substring(e.length-s)}(m||"",15),R=function(){O({type:"success",message:"Item bought!",title:"Item Bought",position:"topR"})};return(0,a.jsx)("div",{className:"m-1",children:I?(0,a.jsxs)("div",{children:[(0,a.jsx)(y,{isVisible:C,tokenId:r,marketplaceAddress:d,nftAddress:n,onClose:function(){return E(!1)}}),(0,a.jsx)(c.Zb,{title:w,description:_,onClick:function(){S?E(!0):T({onError:function(e){return console.log(e)},onSuccess:function(){return R()}})},children:(0,a.jsx)("div",{className:"p-2",children:(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,a.jsxs)("div",{children:["#",r]}),(0,a.jsxs)("div",{className:"italic text-sm",children:["Owned by ",B]}),(0,a.jsx)(l(),{loader:function(){return I},src:I,height:"200",width:"200"}),(0,a.jsxs)("div",{className:"font-bold",children:[f.bM(t,"ether")," ETH"]})]})})})]}):(0,a.jsx)("div",{children:"Loading..."})})}var x=n(48036);function k(){var e,t,n=(e=['\n    {\n        activeItems(first: 5, where: { buyer: "0x0000000000000000000000000000000000000000" }) {\n            id\n            buyer\n            seller\n            nftAddress\n            tokenId\n            price\n        }\n    }\n'],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return k=function(){return n},n}var h=(0,n(17283).Ps)(k()),I=n(3056);function N(){var e,t=(0,s.Nr)(),n=t.chainId,r=t.isWeb3Enabled,i=n?parseInt(n).toString():null,o=n?x[i].NftMarketplace[0]:null,p=(0,I.a)(h),u=p.loading,d=(p.error,p.data);return console.log("listedNfts",d),(0,a.jsxs)("div",{className:"container mx-auto",children:[(0,a.jsx)("h1",{className:"py-4 px-4 font-bold text-2xl",children:"Recently Listed"}),(0,a.jsx)("div",{className:"flex flex-wrap",children:r&&n?u||!d?(0,a.jsx)("div",{children:"Loading..."}):null===(e=d.activeItems)||void 0===e?void 0:e.map((function(e){var t=e.price,n=e.nftAddress,s=e.tokenId,r=e.seller;return o?(0,a.jsx)(v,{price:t,nftAddress:n,tokenId:s,marketplaceAddress:o,seller:r},"".concat(n).concat(s)):(0,a.jsx)("div",{children:"Network error, please switch to a supported network. "})})):(0,a.jsx)("div",{children:"Web3 Currently Not Enabled"})})]})}},67225:function(e){"use strict";e.exports=JSON.parse('[{"type":"constructor","payable":false,"inputs":[]},{"type":"event","anonymous":false,"name":"Approval","inputs":[{"type":"address","name":"owner","indexed":true},{"type":"address","name":"approved","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"event","anonymous":false,"name":"ApprovalForAll","inputs":[{"type":"address","name":"owner","indexed":true},{"type":"address","name":"operator","indexed":true},{"type":"bool","name":"approved","indexed":false}]},{"type":"event","anonymous":false,"name":"DogMinted","inputs":[{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"event","anonymous":false,"name":"Transfer","inputs":[{"type":"address","name":"from","indexed":true},{"type":"address","name":"to","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"function","name":"TOKEN_URI","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"approve","constant":false,"payable":false,"inputs":[{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"balanceOf","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"owner"}],"outputs":[{"type":"uint256"}]},{"type":"function","name":"getApproved","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"address"}]},{"type":"function","name":"getTokenCounter","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"uint256"}]},{"type":"function","name":"isApprovedForAll","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"owner"},{"type":"address","name":"operator"}],"outputs":[{"type":"bool"}]},{"type":"function","name":"mintNft","constant":false,"payable":false,"inputs":[],"outputs":[]},{"type":"function","name":"name","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"ownerOf","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"address"}]},{"type":"function","name":"safeTransferFrom","constant":false,"payable":false,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"safeTransferFrom","constant":false,"payable":false,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"},{"type":"bytes","name":"_data"}],"outputs":[]},{"type":"function","name":"setApprovalForAll","constant":false,"payable":false,"inputs":[{"type":"address","name":"operator"},{"type":"bool","name":"approved"}],"outputs":[]},{"type":"function","name":"supportsInterface","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"bytes4","name":"interfaceId"}],"outputs":[{"type":"bool"}]},{"type":"function","name":"symbol","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"tokenURI","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"string"}]},{"type":"function","name":"transferFrom","constant":false,"payable":false,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]}]')},4672:function(e){"use strict";e.exports=JSON.parse('[{"type":"error","name":"NftMarketplace__AlreadyListed","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}]},{"type":"error","name":"NftMarketplace__NoProceeds","inputs":[]},{"type":"error","name":"NftMarketplace__NotApprovedForMarketplace","inputs":[]},{"type":"error","name":"NftMarketplace__NotListed","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}]},{"type":"error","name":"NftMarketplace__NotOwner","inputs":[]},{"type":"error","name":"NftMarketplace__PriceMustBeAboveZero","inputs":[]},{"type":"error","name":"NftMarketplace__PriceNotMet","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"price"}]},{"type":"error","name":"NftMarketplace__TransferFailed","inputs":[]},{"type":"event","anonymous":false,"name":"ItemBought","inputs":[{"type":"address","name":"buyer","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true},{"type":"uint256","name":"price","indexed":false}]},{"type":"event","anonymous":false,"name":"ItemCanceled","inputs":[{"type":"address","name":"seller","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"event","anonymous":false,"name":"ItemListed","inputs":[{"type":"address","name":"seller","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true},{"type":"uint256","name":"price","indexed":false}]},{"type":"function","name":"buyItem","constant":false,"stateMutability":"payable","payable":true,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"cancelListing","constant":false,"payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"getListing","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"tuple","components":[{"type":"uint256","name":"price"},{"type":"address","name":"seller"}]}]},{"type":"function","name":"getProceeds","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"seller"}],"outputs":[{"type":"uint256"}]},{"type":"function","name":"listItem","constant":false,"payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"price"}],"outputs":[]},{"type":"function","name":"updateListing","constant":false,"payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"newPrice"}],"outputs":[]},{"type":"function","name":"withdrawProceeds","constant":false,"payable":false,"inputs":[],"outputs":[]}]')},48036:function(e){"use strict";e.exports=JSON.parse('{"31337":{"NftMarketplace":["0x5FbDB2315678afecb367f032d93F642f64180aa3"]},"421613":{"NftMarketplace":["0xF44faC9CA2d579a227F3D7d060d2Fb80B05Ba260"]},"11155111":{"NftMarketplace":["0x813c6080F2BCdB5855c4c6A8B5E3f3c6DF91008E"]}}')}},function(e){e.O(0,[730,675,774,888,179],(function(){return t=78581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);